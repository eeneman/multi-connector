<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Robot 3.2.2 (Python 3.9.5 on darwin)" generated="20210616 23:09:53.273" rpa="false">
<suite id="s1" name="Connector Tests" source="/Volumes/ext_drive/smarthala/04_Eeneman/src/multi-connector/robottests/connectors/luotettava-kumppani-interpretations/connector_tests.robot">
<test id="s1-t1" name="fetch, 200">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20210616 23:09:54.056" level="INFO">${body} = {'productCode': 'luotettava-kumppani-interpretations', 'parameters': {'idOfficial': '0103460-8', 'registrationCountry': 'FI'}}</msg>
<status status="PASS" starttime="20210616 23:09:54.055" endtime="20210616 23:09:54.056"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20210616 23:09:54.057" level="INFO">${now} = 2021-06-16T20:09:54+00:00</msg>
<status status="PASS" starttime="20210616 23:09:54.056" endtime="20210616 23:09:54.057"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20210616 23:09:54.057" endtime="20210616 23:09:54.057"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20210616 23:09:54.057" endtime="20210616 23:09:54.058"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20210616 23:09:54.059" level="INFO">${json_string} = {"productCode": "luotettava-kumppani-interpretations", "parameters": {"idOfficial": "0103460-8", "registrationCountry": "FI"}, "timestamp": "2021-06-16T20:09:54+00:00"}</msg>
<status status="PASS" starttime="20210616 23:09:54.058" endtime="20210616 23:09:54.059"></status>
</kw>
<msg timestamp="20210616 23:09:54.059" level="INFO">${body} = {'productCode': 'luotettava-kumppani-interpretations', 'parameters': {'idOfficial': '0103460-8', 'registrationCountry': 'FI'}, 'timestamp': '2021-06-16T20:09:54+00:00'}</msg>
<status status="PASS" starttime="20210616 23:09:54.055" endtime="20210616 23:09:54.059"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20210616 23:09:54.061" level="INFO">${signature} = nNsY7Utq3/8Wi14wHP0YR6Pfh1yWGw/ab2D1w3rOIb0=</msg>
<status status="PASS" starttime="20210616 23:09:54.060" endtime="20210616 23:09:54.061"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20210616 23:09:54.061" endtime="20210616 23:09:54.062"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${CONNECTOR_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20210616 23:09:54.062" endtime="20210616 23:09:59.067"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20210616 23:09:59.068" level="INFO">
{
    "type": "object",
    "properties": {
        "@context": {
            "type": "string",
            "default": "https://standards.oftrust.net/v2/Context/DataProductOutput/Report/OrganizationTrustCategory/?v=3.1"
        },
        "data": {
            "type": "object",
            "properties": {
                "OrganizationTrustCategory": {
                    "type": "object",
                    "properties": {
                        "@type": {
                            "type": "string",
                            "default": "Report"
                        },
                        "idOfficial": {
                            "type": "string",
                            "default": "0103460-8"
                        },
                        "name": {
                            "type": "string",
                            "default": "Borenius Asianajotoimisto Oy"
                        },
                        "registrationCountry": {
                            "type": "string",
                            "default": "FI"
                        },
                        "categorizationTrust": {
                            "type": "string",
                            "default": "Ok"
                        },
                        "idSystemLocal": {
                            "type": "string",
                            "default": "1623694525689"
                        },
                        "created": {
                            "type": "string",
                            "default": "2021-06-14T21:15:25"
                        }
                    },
                    "required": [
                        "@type",
                        "categorizationTrust",
                        "created",
                        "idOfficial",
                        "idSystemLocal",
                        "name",
                        "registrationCountry"
                    ]
                }
            },
            "required": [
                "OrganizationTrustCategory"
            ]
        },
        "signature": {
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "default": "RsaSignature2018"
                },
                "created": {
                    "type": "string",
                    "default": "2021-06-16T23:09:58+03:00"
                },
                "creator": {
                    "type": "string",
                    "default": "http://localhost:8080/translator/v1/public.key"
                },
                "signatureValue": {
                    "type": "string",
                    "default": "VoQhKb6tlWhqWWL9wOxKU2QcJebw34+tU1dPITjypa6lcxqeLr9j72wuf124tf8H2RnBofaVbahV1+puaDa6hfe5p96FJ8jAqieKfQO7CmZ5cTr4nXffCxm/W43rLijsF5miOq9eQTUPd38TzXukWufWDjD/pkwG2mWwJgf+YFMYwAQPViPs0ETDchgravQ+FBrtj2L69wsmYpF+hHRMgUy/AsR++a8Hg2RYSzorqpj/L3n/KnBZdsm18mbI6nYBtbyySA0fbu8biLTE8/fkSBQAKdpQv+rAH5dIl3tgnkYrgz3TlTLLp169u4J8jpFiHjb1/360ujG5b88TMR6GdxYU6SOWgmHigKaIh3iMKwMqjk8vyD07nEbUEeAHIEn4VonZfXrDK76DREx7o8Gmb0PmjXTgwwZv5DWFXM9n+f0G9UkDi/13v4sRolnMLNDzcOhmFBfAjz1ffXruzt+Rsi4GDveGPSMCBNnuXGBbBkYdXWKVYIjmLybjrE7Yw+EMPd+Ud8StJdO9+ihuezjB0mIs4GF6F7UH+5XQaGjeSu4yHBovLa+enKljBs3chxpgUPUEx8QyHSg3naTDUcI5ZgfmZNKm8BYoavKcPBYdh3G0xj9sZY2EtxUZdfAiW23/BSvoDiVEch42cIKB+D6J3nneo8G9k1UMdWC1W5W9P6o="
                }
            },
            "required": [
                "created",
                "creator",
                "signatureValue",
                "type"
            ]
        }
    },
    "required": [
        "@context",
        "data",
        "signature"
    ]
}</msg>
<status status="PASS" starttime="20210616 23:09:59.068" endtime="20210616 23:09:59.098"></status>
</kw>
<status status="PASS" starttime="20210616 23:09:54.059" endtime="20210616 23:09:59.099"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>200</arg>
</arguments>
<status status="PASS" starttime="20210616 23:09:59.099" endtime="20210616 23:09:59.101"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body @context</arg>
<arg>https://standards.oftrust.net/v2/Context/DataProductOutput/Report/OrganizationTrustCategory/\?v\=3.1</arg>
</arguments>
<status status="PASS" starttime="20210616 23:09:59.101" endtime="20210616 23:09:59.103"></status>
</kw>
<kw name="Object" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON object.*</doc>
<arguments>
<arg>response body data</arg>
</arguments>
<status status="PASS" starttime="20210616 23:09:59.103" endtime="20210616 23:09:59.109"></status>
</kw>
<kw name="Array" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON array.*</doc>
<arguments>
<arg>response body data OrganizationTrustCategory</arg>
</arguments>
<msg timestamp="20210616 23:09:59.119" level="FAIL">{'@type': 'Report', 'idOfficial': '0103460-8', 'name': 'Borenius Asianajotoimisto Oy', 'registrationCountry': 'FI', 'categorizationTrust': 'Ok', 'idSystemLocal': '1623694525689', 'created': '2021-06-14T21:15:25'} is not of type 'array'

Failed validating 'type' in schema:
    {'examples': [{'@type': 'Report',
                   'categorizationTrust': 'Ok',
                   'created': '2021-06-14T21:15:25',
                   'idOfficial': '0103460-8',
                   'idSystemLocal': '1623694525689',
                   'name': 'Borenius Asianajotoimisto Oy',
                   'registrationCountry': 'FI'}],
     'properties': {'@type': {'default': 'Report', 'type': 'string'},
                    'categorizationTrust': {'default': 'Ok',
                                            'type': 'string'},
                    'created': {'default': '2021-06-14T21:15:25',
                                'type': 'string'},
                    'idOfficial': {'default': '0103460-8',
                                   'type': 'string'},
                    'idSystemLocal': {'default': '1623694525689',
                                      'type': 'string'},
                    'name': {'default': 'Borenius Asianajotoimisto Oy',
                             'type': 'string'},
                    'registrationCountry': {'default': 'FI',
                                            'type': 'string'}},
     'required': ['@type',
                  'categorizationTrust',
                  'created',
                  'idOfficial',
                  'idSystemLocal',
                  'name',
                  'registrationCountry'],
     'type': 'array'}

On instance:
    {'@type': 'Report',
     'categorizationTrust': 'Ok',
     'created': '2021-06-14T21:15:25',
     'idOfficial': '0103460-8',
     'idSystemLocal': '1623694525689',
     'name': 'Borenius Asianajotoimisto Oy',
     'registrationCountry': 'FI'}</msg>
<status status="FAIL" starttime="20210616 23:09:59.109" endtime="20210616 23:09:59.119"></status>
</kw>
<status status="FAIL" starttime="20210616 23:09:54.053" endtime="20210616 23:09:59.120" critical="yes">{'@type': 'Report', 'idOfficial': '0103460-8', 'name': 'Borenius Asianajotoimisto Oy', 'registrationCountry': 'FI', 'categorizationTrust': 'Ok', 'idSystemLocal': '1623694525689', 'created': '2021-06-14T21:15:25'} is not of type 'array'

Failed validating 'type' in schema:
    {'examples': [{'@type': 'Report',
                   'categorizationTrust': 'Ok',
                   'created': '2021-06-14T21:15:25',
                   'idOfficial': '0103460-8',
                   'idSystemLocal': '1623694525689',
                   'name': 'Borenius Asianajotoimisto Oy',
                   'registrationCountry': 'FI'}],
     'properties': {'@type': {'default': 'Report', 'type': 'string'},
                    'categorizationTrust': {'default': 'Ok',
                                            'type': 'string'},
                    'created': {'default': '2021-06-14T21:15:25',
                                'type': 'string'},
                    'idOfficial': {'default': '0103460-8',
                                   'type': 'string'},
    [ Message content over the limit has been removed. ]
                             'type': 'string'},
                    'registrationCountry': {'default': 'FI',
                                            'type': 'string'}},
     'required': ['@type',
                  'categorizationTrust',
                  'created',
                  'idOfficial',
                  'idSystemLocal',
                  'name',
                  'registrationCountry'],
     'type': 'array'}

On instance:
    {'@type': 'Report',
     'categorizationTrust': 'Ok',
     'created': '2021-06-14T21:15:25',
     'idOfficial': '0103460-8',
     'idSystemLocal': '1623694525689',
     'name': 'Borenius Asianajotoimisto Oy',
     'registrationCountry': 'FI'}</status>
</test>
<doc>luotettava-kumppani-interpretations - REST</doc>
<status status="FAIL" starttime="20210616 23:09:53.280" endtime="20210616 23:09:59.122"></status>
</suite>
<statistics>
<total>
<stat pass="0" fail="1">Critical Tests</stat>
<stat pass="0" fail="1">All Tests</stat>
</total>
<tag>
</tag>
<suite>
<stat pass="0" fail="1" id="s1" name="Connector Tests">Connector Tests</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
